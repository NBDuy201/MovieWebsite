import{R as v,a as s,j as i,e as E,u as y,m as I}from"./index.43d98d9e.js";import{p as L}from"./createSvgIcon.b4693e9c.js";import{t as x}from"./config.ea020879.js";import{d as T,a as S,b as j,r as O}from"./favorite-api.965f7039.js";import"./jsx-runtime_commonjs-proxy.75b84722.js";const M=(e=[])=>{const a={ALPHABETICAL:"title",RATING:"vote_average",RELEASE_DATE:"release_date"},[t,l]=v.useState([]),[r,u]=v.useState(a.ALPHABETICAL),[n,m]=v.useState(!0),[c,g]=v.useState(!1);function p(d,h,o){return typeof d[o]=="number"?n?d[o]-h[o]:h[o]-d[o]:n?d[o].localeCompare(h[o]):h[o].localeCompare(d[o])}return v.useEffect(()=>{g(!0);let d=Array.isArray(e)?[...e]:[];d.sort((h,o)=>p(h,o,r)),l(d),g(!1)},[n,r,JSON.stringify(e)]),{sortedMovies:t,isLoading:c,filter:r,isAsc:n,setFilter:u,setIsAsc:m,FILTER_VAL:a}};var b={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N=v.createContext&&v.createContext(b),f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(e){for(var a,t=1,l=arguments.length;t<l;t++){a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},f.apply(this,arguments)},P=globalThis&&globalThis.__rest||function(e,a){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(t[l[r]]=e[l[r]]);return t};function w(e){return e&&e.map(function(a,t){return v.createElement(a.tag,f({key:t},a.attr),w(a.child))})}function A(e){return function(a){return s(D,{...f({attr:f({},e.attr)},a),children:w(e.child)})}}function D(e){var a=function(t){var l=e.attr,r=e.size,u=e.title,n=P(e,["attr","size","title"]),m=r||t.size||"1em",c;return t.className&&(c=t.className),e.className&&(c=(c?c+" ":"")+e.className),i("svg",{...f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,n,{className:c,style:f(f({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),children:[u&&s("title",{children:u}),e.children]})};return N!==void 0?s(N.Consumer,{children:function(t){return a(t)}}):a(b)}function R(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.5 17.25a.75.75 0 0 1-1.5 0V7.56l-2.22 2.22a.75.75 0 1 1-1.06-1.06l3.5-3.5a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 0 1-1.06 1.06L18.5 7.56v9.69Zm-15.75.25a.75.75 0 0 1 0-1.5h9.5a.75.75 0 0 1 0 1.5h-9.5Zm0-5a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 0 1.5h-5.5Zm0-5a.75.75 0 0 1 0-1.5h3.5a.75.75 0 0 1 0 1.5h-3.5Z"}}]})(e)}function k(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.5 16.44V6.75a.75.75 0 0 0-1.5 0v9.69l-2.22-2.22a.75.75 0 1 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 1 0-1.06-1.06l-2.22 2.22ZM2 7.25a.75.75 0 0 1 .75-.75h9.5a.75.75 0 0 1 0 1.5h-9.5A.75.75 0 0 1 2 7.25Zm0 5a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75Zm0 5a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"}}]})(e)}const z=({favMovies:e=[],FILTER_VAL:a={},setFilter:t=()=>{},isAsc:l=!0,setIsAsc:r=()=>{}})=>{const u=[{title:"Alphabetical",value:a.ALPHABETICAL},{title:"Rating",value:a.RATING},{title:"Release Date",value:a.RELEASE_DATE}];return i("div",{className:"bg-secondary rounded-lg sticky top-0 z-20",children:[s("h1",{className:"p-4 border-b border-subtitle",children:"Your favorite movies"}),i("div",{className:"p-4 flex justify-between items-center",children:[i("div",{className:"text-subtitle",children:[e?.length||0," titles"]}),i("div",{className:"w-1/4 flex gap-x-2 items-center",children:[s("label",{htmlFor:"countries",className:"text-sm",children:"Sort by"}),s("select",{id:"countries",onChange:n=>t(n.target.value),className:"border border-white bg-secondary text-sm rounded-lg block flex-1 p-2",children:u.map(n=>s("option",{value:n.value,className:"bg-secondary",children:n.title},n.value))}),l?s(R,{className:"text-3xl cursor-pointer",onClick:()=>r(!1)}):s(k,{className:"text-3xl cursor-pointer",onClick:()=>r(!0)})]})]})]})},_=({data:e={}})=>{const{title:a,vote_average:t,release_date:l,poster_path:r,id:u,overview:n,genre_ids:m}=e,c=E(),{authInfo:g,getUserData:p}=y();async function d(o){try{await O(o,g.uid)}catch(C){console.log(C)}}function h(){d(e),p()}return i("div",{className:"movie-card rounded-md bg-secondary p-4 relative flex gap-x-4",children:[i("button",{className:"absolute left-2 top-3 z-10",onClick:h,children:[s(T,{className:"text-secondary text-[70px] opacity-50 hover:opacity-100"}),s(S,{className:"text-white absolute right-[22px] top-5 pointer-events-none"})]}),s("img",{src:x.getImage(r,"w500")||"/notFound.png",alt:"no image",onClick:()=>c(I.MOVIE_DETAIL(u)),className:"w-1/5 min-w-[120px] max-h-[300px] object-cover rounded-md cursor-pointer hover:opacity-80"}),i("div",{className:"flex-1",children:[s("h2",{className:"",children:a}),i("p",{className:"text-subtitle text-sm flex",children:[s("span",{className:"after:content-['|'] after:px-2",children:new Date(l).getFullYear()}),s("span",{className:"",children:m?.map(o=>x.getGenreName(o))?.join(", ")})]}),i("div",{className:"flex items-center gap-x-1",children:[s(j,{className:"text-yellow-500 text-lg"})," ",t]}),s("p",{className:"line-clamp-4",children:n})]})]})};_.propTypes={data:L.exports.object};const V=()=>{const{userInfo:e,isLoading:a}=y(),{sortedMovies:t,FILTER_VAL:l,isAsc:r,setIsAsc:u,setFilter:n,isLoading:m}=M(e?.favMovie);return i("div",{className:"flex flex-col gap-y-6 mb-12",children:[s(z,{favMovies:t,FILTER_VAL:l,isAsc:r,setIsAsc:u,setFilter:n}),a||m?"Loading":t?.length>0?s("div",{className:"grid grid-cols-2 gap-4",children:t.map(c=>s(_,{data:c},c.id))}):i("div",{className:"w-1/4 mx-auto mt-10",children:[i("div",{className:"w-full relative",children:[s("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 rotate-45 w-[130%] h-2 bg-white opacity-70 rounded-md"}),s("img",{src:"emptyMovie.png",alt:"",className:"w-full h-full object-cover"})]}),s("h2",{className:"text-center mt-4",children:"No favorite film yet"})]})]})};export{V as default};
